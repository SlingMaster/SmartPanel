var WEB_URL="http://192.168.1.77";var CHANNEL=117345;var MAX_GRAPH=4;var CHIP=2334292;var CLOUD_FRAME="web_graph";var RESULTS={t1:60,t2:720,t3:43200};var TIME_SCALE={t1:10,t2:20,t3:1440};var RESULTS={t1:60,t2:720,t3:30};var TYPE=["spline","spline","spline","line"];var RES_MAX=[50,40,null,1];var RES_MIN=[10,10,null,0];var SYM=["","&deg;C","&deg;C","%",""];var intervalUpdateESP;var graph_count=1;var lastGraph="t1";function getCloudData(b){var a=b.feeds[0];var c=new Object;c.thw=a.field1;c.t=a.field2;c.h=a.field3;c.fan_stop=(a.field4==="0");c.time=a.created_at;c.all_mem=100;c.mem=100;c.pickup=50;c.source="cloud";return c}function isFieldUpdate(){if(graph_count===4){document.getElementById("min_max").innerHTML="";return false}return true}window.onload=function(){window.setTimeout(function(){showUI()},100);addCrossdomainEventsListener()};function clickControlESP(a){a.stopPropagation();var b=a.target.value;console.warn("clickControl | id:",b);switch(b){case"restart":case"update":case"fan":sendCommandESP("web_srv",WEB_URL,b,0);break;default:break}}function clickClearError(a){a.stopPropagation();sendCommandESP("web_srv",WEB_URL,"clear",0)}function updateDisplayData(c,a){var b=parseFloat(a.thw).toFixed(1);updateLedDisplay("t",parseFloat(a.t).toFixed(1));updateLedDisplay("h",parseFloat(a.h).toFixed(1));updateLedDisplay("thw",b);updateLedDisplay("statusLabel",getTimeFormatUTC(a.time));updateProgressBar(c,a);updateErrors(a);setProgressColor(b);setPickupValuePosition(a);setButtonState(a)}function updateErrors(b){var a=isPresent(b.last_error)?b.last_error:"";$(".cs_error").html(a)}function createDisplays(){var a='<div class="ds_box">'+createLedDisplay("t","temperature","t","")+createControlLedDisplay("h","humidity","h","")+createLedDisplay("thw","temperature hotÂ water","t","")+createProgressLedDisplay("thw_progress")+'<div class="fan_box"><div class="fan stop"></div></div>'+createTimeLedDisplay("connection esp web server");("</div>");document.getElementById("displays").innerHTML=a;$("#srvState").toggleClass("ready",false);setProgressColor(0)}function setButtonState(a){if(a.source==="esp"){$("#btn_power_fan").toggleClass("select",a.fan_force)}$(".fan").toggleClass("stop",a.fan_stop)}function setLedColor(b){var c=Math.ceil((b-25)/5);if(c<0){c=0}var a=c>5?100:c*20;$("#temperatureState").css("backgroundPosition",a+"% center")}function setProgressColor(b){var c=Math.ceil((b-25)/5);if(c<0){c=0}var a=c>5?100:c*20;if(c>4){$(".state_progress:first-child").css("margin-right","0%");$(".state_progress:first-child").css("width",a-10+"%")}else{$(".state_progress:first-child").css("width",a+"%")}$(".state_progress:last-child").css("width",80-a+"%")}function setPickupValuePosition(d){var a=5;var e=25;var c=parseInt(d.pickup,10);var b=(c-a-e)*2;$(".cs_diapazon_poz").css("left",b+"%");$(".cs_diapazon_info").html(c+"%")};