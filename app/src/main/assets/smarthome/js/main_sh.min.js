var WEB_URL="http://192.168.1.199";var CHANNEL=135846;var MAX_GRAPH=5;var CHIP=772471;var CLOUD_FRAME="web_graph";var RESULTS={t1:60,t2:720,t3:43200};var TIME_SCALE={t1:10,t2:20,t3:1440};var RESULTS={t1:60,t2:720,t3:30};var TYPE=["spline","spline","spline","spline","spline"];var RES_MAX=[30,null,770,40,null];var RES_MIN=[-20,null,700,10,null];var SYM=["","&deg;C","%"," mmHg","&deg;C","%",""];var intervalUpdateESP;var graph_count=1;var lastGraph="t1";function getCloudData(b){var a=b.feeds[0];var c=new Object;c.air_t=a.field1;c.air_h=a.field2;c.air_p=a.field3;c.home_t=a.field4;c.home_h=a.field5;c.time=a.created_at;c.all_mem=100;c.mem=100;c.source="cloud";return c}function isFieldUpdate(){return true}window.onload=function(){window.setTimeout(function(){showUI()},100);addCrossdomainEventsListener()};function clickControlESP(a){a.stopPropagation();var b=a.target.value;console.warn("clickControl | id:",b);switch(b){case"restart":case"update":case"relay1":case"relay2":case"relay3":case"relay4":sendCommandESP("web_srv",WEB_URL,b,0);break;default:break}}function updateDisplayData(c,a){var b=parseFloat(a.air_t).toFixed(1);updateLedDisplay("air_t",b);updateLedDisplay("air_h",parseFloat(a.air_h).toFixed(1));updateLedDisplay("air_p",parseFloat(a.air_p).toFixed(1));updateLedDisplay("home_t",parseFloat(a.home_t).toFixed(1));updateLedDisplay("home_h",parseFloat(a.home_h).toFixed(1));updateLedDisplay("statusLabel",getTimeFormatUTC(a.time));setProgressColor(b);updateProgressBar(c,a);setButtonState(a)}function createDisplays(){var a='<div class="ds_box">'+createLedDisplay("air_t","temperature air","t","")+createProgressLedDisplay("thw_progress")+createLedDisplay("air_h","humidity air","h","")+createLedDisplay("air_p","pressure air","p","")+createLedDisplay("home_t","temperature home","t","")+createLedDisplay("home_h","humidity home","h","")+createTimeLedDisplay("connection esp web server")+"</div>";document.getElementById("displays").innerHTML=a;$("#srvState").toggleClass("ready",false);setProgressColor(-30)}function setButtonState(a){if(a.source==="esp"){$("#r1").toggleClass("select",a.relay1);$("#r2").toggleClass("select",a.relay2);$("#r3").toggleClass("select",a.relay3);$("#r4").toggleClass("select",a.relay4)}}function setLedColor(b){var c=Math.ceil((b+20)/10);if(c<0){c=0}var a=(c>5)?100:c*20;console.info("setLedColor val:",a);$("#temperatureState").css("backgroundPosition",(a+"% center"))}function setProgressColor(b){var c=Math.ceil((b+20)/10);if(c<0){c=0}var a=(c>5)?100:c*20;if(c>4){$(".state_progress:first-child").css("margin-right","0%");$(".state_progress:first-child").css("width",((a-10)+"%"))}else{$(".state_progress:first-child").css("width",(a+"%"))}$(".state_progress:last-child").css("width",((80-a)+"%"))};