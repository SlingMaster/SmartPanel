/*! (c) Developer Alex Dovby 
timer Release It is Created 19.02.2020 - 20:52:09,79 
version 19.02.2020 */
;var start_day;var start_night;var auto_start_night_mode;var swap_frequency;var nightMode=false;var last_state=false;var withAPP=false;var flag=false;window.onload=function(){if(!isTouchDevice()){init({});updateWidget(null)}ResizeWidget();withAPP=isNativeApplication();addOnmessageEventsListener();window.setTimeout(function(){sendRequestToNativeApp(EVT_READY,{browser:getBrowser(),ui:"project_watch"});$(".overlay").fadeOut("slow",function(){});this.setInterval(setDigitalTime,1000)},2500);setCurrentTime()};window.onresize=function(){ResizeWidget()};function ResizeWidget(){var d=Math.min(window.innerWidth,window.innerHeight)/800;d=Math.min($("#win").innerWidth(),$("#win").innerHeight())/720;var b=nightMode?0.65:1;var a=nightMode?1:0.75;var e=nightMode?-108:-95;var c=nightMode?-22:-10;$("#analog").css("transform","translate("+Math.floor(e)+"%, -50%) scale("+d*b+")");$("#time").css("transform","translate("+Math.floor(c)+"%, -50%) scale("+d*a+")");$("#time").css("color",nightMode?"#84ffff":"#FFFFFF");$(".bg").css("background-position",nightMode?"center 72%":"center 45%");last_state=nightMode}function restartAnimation(){el_hour=document.getElementById("arrow_hour");el_min=document.getElementById("arrow_min");el_sec=document.getElementById("arrow_sec");el_hour.classList.remove("run-animation");el_min.classList.remove("run-animation");el_sec.classList.remove("run-animation");el_hour.classList.add("run-animation");el_min.classList.add("run-animation");el_sec.classList.add("run-animation")}function setDigitalTime(){var f=["January","February","March","April","May","June","July","August","September","October","November","December"];var b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var c=new Date();var a=c.getHours();var d=c.getMinutes();var e=c.getSeconds();$("#time").html(formatXX(a,2)+"<span>:</span>"+formatXX(d,2)+"<span>:</span>"+formatXX(e,2)+(nightMode?'<div class="time_desc">':'<div class="time_desc dig">')+c.getDate()+", "+f[c.getMonth()]+" "+c.getFullYear()+" â€¢ "+b[c.getDay()]+"</div>");if(e===0){nightMode=a<start_day||a>=start_night}if(last_state!==nightMode&&e===0){swapDigitalAnalog()}}function setCurrentTime(){var d=new Date();var c=d.getMonth();var e=d.getDay();var b=d.getDate();var g=d.getHours();var h=d.getMinutes();var f=d.getSeconds();var a=g>12?g-12:g;restartAnimation();$("#hour").css("-webkit-transform","rotate("+(a*30+h*0.48+f*0.06)+"deg)");$("#min").css("-webkit-transform","rotate("+(h*6+f*0.06)+"deg)");$("#sec").css("-webkit-transform","rotate("+f*6+"deg)");$("#cur_month_gear").css("-webkit-transform","rotate("+c*-30+"deg)")}function updateWidget(a){setCurrentTime()}function setLed(a){if(a===null){return}var b=a.resp_data;if(b.bluetooth){document.getElementById("bluetooth").classList.remove("hide")}else{document.getElementById("bluetooth").classList.add("hide")}if(b.wifi){document.getElementById("wifi").classList.remove("hide")}else{document.getElementById("wifi").classList.add("hide")}if(b.gps){document.getElementById("gps").classList.remove("hide")}else{document.getElementById("gps").classList.add("hide")}if(b.airplane_mode){document.getElementById("air_mode").classList.remove("hide")}else{document.getElementById("air_mode").classList.add("hide")}if(b.battery>2){document.getElementById("level_battery").classList.remove("low")}else{document.getElementById("level_battery").classList.add("low")}document.getElementById("level_battery").style.width=b.battery*10+"%"}function onClickSettings(a){a.stopPropagation();sendRequestToAplication(EVT_SETTINGS,"settings",{})}function onClickSwap(a){a.stopPropagation();nightMode=!nightMode;swapDigitalAnalog()}function swapDigitalAnalog(){console.info("swapDigitalAnalog | nightMode "+nightMode);ResizeWidget()}function init(a){start_day=a.start_day||6;start_night=a.start_night||19;swap_frequency=a.swap_frequency||1;auto_start_night_mode=a.auto_start_night_mode||false}function JavaScriptCallback(c,b){var a=b[RESPONSE_JSON]||{};switch(c){case CMD_INIT:init(a);window.setTimeout(function(){sendRequestToNativeApp(EVT_SYNC,{response:null})},5000);window.setTimeout(function(){updateWidget(a)},1000);break;case CMD_BACK:backEvent();break;case CMD_WEATHER_DATA:break;case CMD_SWAP:nightMode=!nightMode;ResizeWidget();break;case CMD_UPDATE:updateWidget(a);break;case CMD_REDIRECT:break;case EVT_EXO:console.info("[ trace ] JavaScriptCallback command "+c+" EVT_EXO");$("#json-cmd").html("cmd : "+c+" | "+JSON.stringify(a).split(",").join(", "));break;default:console.info("[ ] JavaScriptCallback command "+c+" not present");break}}function backPrevScreen(){console.info("backPrevScreen")}function updateWeatherOutDoor(a){}function onClickTest(a){a.stopPropagation();$(a.target).toggleClass("selected");var b=$(a.target).hasClass("selected");flag=!flag;sendRequestToNativeApp(EVT_BACK_LIGHT,{sleep_mode:flag})};